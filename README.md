# Go Template

ä¸€ä¸ªåŸºäº Go è¯­è¨€çš„ç°ä»£åŒ– Web æœåŠ¡é¡¹ç›®æ¨¡æ¿ï¼Œé‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)å’Œæ•´æ´æ¶æ„(Clean Architecture)æ€æƒ³æ„å»ºã€‚

## å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨ gonew åˆ›å»ºé¡¹ç›®

1. å®‰è£… gonew å·¥å…·
```bash
go install golang.org/x/tools/cmd/gonew@latest
```

2. ä½¿ç”¨æ¨¡æ¿åˆ›å»ºæ–°é¡¹ç›®
```bash
gonew github.com/lyonnee/go-template github.com/your-username/your-project
```

3. è¿›å…¥é¡¹ç›®ç›®å½•
```bash
cd your-project
```

4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
go run cmd/server/main.go -e dev
```

### ç¯å¢ƒå˜é‡

ä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¾ç½®è¿è¡Œç¯å¢ƒï¼š
- å‘½ä»¤è¡Œå‚æ•°: `-e` æˆ– `--env`
- ç¯å¢ƒå˜é‡: `APP_ENV`
- é»˜è®¤å€¼: `prod`

## é¡¹ç›®ç‰¹æ€§

- ğŸ“¦ æ•´æ´æ¶æ„ (Clean Architecture)
- ğŸ¯ é¢†åŸŸé©±åŠ¨è®¾è®¡ (DDD)
- ğŸ” JWT è®¤è¯
- ğŸ“ ç»“æ„åŒ–æ—¥å¿— (Zap)
- ğŸ—„ï¸ PostgreSQL æ•°æ®åº“
- ğŸ”„ ä¼˜é›…å…³æœº
- ğŸ³ Docker æ”¯æŒ
- ğŸ“Š Prometheus æŒ‡æ ‡
- âš¡ é«˜æ€§èƒ½ HTTP è·¯ç”± (Fiber)
- ğŸ”Œ gRPC æ”¯æŒ
- ğŸ“¨ æ¶ˆæ¯é˜Ÿåˆ—é›†æˆ
- ğŸ’¾ ç¼“å­˜æ”¯æŒ
- â° å®šæ—¶ä»»åŠ¡
- ğŸ”§ å¤šç¯å¢ƒé…ç½®

## é¡¹ç›®ç»“æ„

```
go-template/                          # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ cmd/                             # å‘½ä»¤è¡Œå…¥å£ç›®å½•
â”‚   â”œâ”€â”€ migrate/                     # æ•°æ®åº“è¿ç§»å·¥å…·
â”‚   â”œâ”€â”€ scheduler/                   # å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
â”‚   â””â”€â”€ server/                      # ä¸»æœåŠ¡å™¨
â”‚
â”œâ”€â”€ sql/                             # sqlæè¿°æ–‡ä»¶
â”‚
â”œâ”€â”€ config/                          # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ config.go                    # é…ç½®åŠ è½½é€»è¾‘
â”‚   â””â”€â”€ model.go                     # é…ç½®ç»“æ„å®šä¹‰
â”‚
â”œâ”€â”€ internal/                        # å†…éƒ¨åº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ application/                 # åº”ç”¨å±‚ï¼šå¤„ç†ä¸šåŠ¡æµç¨‹
â”‚   â”‚   â”œâ”€â”€ auth_service.go         # è®¤è¯æœåŠ¡æ¥å£
â”‚   â”‚   â””â”€â”€ impl/                   # æœåŠ¡å®ç°
â”‚   â”œâ”€â”€ domain/                     # é¢†åŸŸå±‚ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ infrastructure/            # åŸºç¡€è®¾æ–½é€‚é…å±‚
â”‚   â”‚   â””â”€â”€ repositories/         # ä»“å‚¨å®ç°
â”‚   â””â”€â”€ interfaces/               # æ¥å£å±‚
â”‚       â”œâ”€â”€ grpc/                # gRPC æ¥å£
â”‚       â””â”€â”€ http/                # HTTP æ¥å£
â”‚           â”œâ”€â”€ controller/      # æ§åˆ¶å™¨
â”‚           â”œâ”€â”€ dto/            # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚           â””â”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚
â”œâ”€â”€ pkg/                        # å…¬å…±åŒ…
â”‚   â”œâ”€â”€ modules/               # åŸºç¡€æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ blockchain/     # åŒºå—é“¾é›†æˆ
â”‚   â”‚   â”œâ”€â”€ cache/         # ç¼“å­˜æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ logger/        # æ—¥å¿—æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ mq/           # æ¶ˆæ¯é˜Ÿåˆ—
â”‚   â”‚   â””â”€â”€ persistence/  # æ•°æ®æŒä¹…åŒ–
â”‚   â””â”€â”€ scheduler/         # è°ƒåº¦å™¨æ¨¡å—
â”‚
â””â”€â”€ servers/               # æœåŠ¡å™¨å®ç°
    â”œâ”€â”€ http.go           # HTTP æœåŠ¡å™¨
    â””â”€â”€ rpc.go            # RPC æœåŠ¡å™¨

```

## æ¶æ„è¯´æ˜

é¡¹ç›®é‡‡ç”¨æ•´æ´æ¶æ„ï¼ˆClean Architectureï¼‰å’Œé¢†åŸŸé©±åŠ¨è®¾è®¡ï¼ˆDDDï¼‰æ€æƒ³æ„å»ºï¼Œåˆ†ä¸ºä»¥ä¸‹å‡ å±‚ï¼š

1. **æ¥å£å±‚** (Interface Layer)
   - å¤„ç† HTTP å’Œ gRPC è¯·æ±‚
   - è¯·æ±‚å‚æ•°éªŒè¯
   - å“åº”å°è£…

2. **åº”ç”¨å±‚** (Application Layer)
   - å¤„ç†ä¸šåŠ¡æµç¨‹
   - ç¼–æ’é¢†åŸŸå¯¹è±¡
   - äº‹åŠ¡ç®¡ç†

3. **é¢†åŸŸå±‚** (Domain Layer)
   - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
   - é¢†åŸŸæ¨¡å‹
   - é¢†åŸŸæœåŠ¡

4. **åŸºç¡€è®¾æ–½å±‚** (Infrastructure Layer)
   - æ•°æ®æŒä¹…åŒ–
   - æ¶ˆæ¯é˜Ÿåˆ—
   - ç¼“å­˜
   - æ—¥å¿—
   - è®¤è¯

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `internal/domain` ä¸­å®šä¹‰é¢†åŸŸæ¨¡å‹
2. åœ¨ `internal/application` ä¸­å®ç°ä¸šåŠ¡é€»è¾‘
3. åœ¨ `internal/interfaces` ä¸­æ·»åŠ  API æ¥å£
4. åœ¨ `internal/infrastructure` ä¸­å®ç°åŸºç¡€è®¾æ–½

### é…ç½®ç®¡ç†

é…ç½®æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•ï¼š
- `config.dev.yaml`: å¼€å‘ç¯å¢ƒ
- `config.test.yaml`: æµ‹è¯•ç¯å¢ƒ
- `config.prod.yaml`: ç”Ÿäº§ç¯å¢ƒ

### æ•°æ®åº“è¿ç§»

```bash
go run cmd/migrate/main.go
```

### è¿è¡Œæµ‹è¯•

```bash
go test ./...
```

## Docker æ”¯æŒ

æ„å»ºé•œåƒï¼š
```bash
docker build -t your-app-name .
```

è¿è¡Œå®¹å™¨ï¼š
```bash
docker run -p 8080:8080 your-app-name
```

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ”¹åŠ¨ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. åˆ›å»º Pull Request

## è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ç»´æŠ¤è€…

- [@lyonnee](https://github.com/lyonnee)

## è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…ã€‚